---
import { FaRegHourglassHalf } from "react-icons/fa6";
import { GiTeacher } from "react-icons/gi";
import { GiHelicopter } from "react-icons/gi";
import { BsAirplaneEngines } from "react-icons/bs";

const { icon, value, title, cssVariable } = Astro.props;

const icons = {
  FaRegHourglassHalf: FaRegHourglassHalf,
  GiTeacher: GiTeacher,
  GiHelicopter: GiHelicopter,
  BsAirplaneEngines: BsAirplaneEngines,
};

const Icon = icons[icon];
---

<div class="bg-dark-blue flex flex-col py-10 group">
  <div
    class="border-r border-white/20 px-10 flex flex-col items-center gap-1 group-last:border-0"
  >
    <Icon className="size-14 mb-4 text-mustard-yellow" />
    <span
      class=`counter text-5xl font-medium tabular-nums [counter-set:_num_var(${cssVariable})] before:content-[counter(num)]`
      ><span class="sr-only">{value}</span>{
        title == "Combined flight hours" ? "+" : ""
      }
    </span>
    <h2 class="text-white/50 text-center">{title}</h2>
  </div>
</div>

<script>
  const counterObserver = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("animate-[counter_3s_ease-out_forwards]");
      }
    });
  });

  const counterElements = document.querySelectorAll(".counter");
  counterElements.forEach((element) => {
    counterObserver.observe(element);
  });
</script>
